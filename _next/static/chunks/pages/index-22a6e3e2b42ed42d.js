(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{5301:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(9785)}])},9785:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return P}});var t=r(4051),s=r.n(t),o=r(5893),i=r(7294),a=r(2355),l=r(4816),c=r(5021),u=r(1836);function d(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function m(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){d(e,n,r[n])}))}return e}function f(e,n){if(null==e)return{};var r,t,s=function(e,n){if(null==e)return{};var r,t,s={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||(s[r]=e[r]);return s}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var p=function(e){return(0,o.jsx)(l.D,{children:e.content,remarkPlugins:[a.Z],components:{code:function(e){e.node;var n=e.inline,r=e.className,t=e.children,s=f(e,["node","inline","className","children"]),i=/language-(\w+)/.exec(r||"");return!n&&i?(0,o.jsx)(c.Z,m({showLineNumbers:!0,children:String(t).replace(/\n$/,""),style:u.Z,language:i[1],PreTag:"div"},s)):(0,o.jsx)("code",m({className:r},s,{children:t}))}}})},h=r(5152),x={CLIENT:{JOIN_ROOM:"JOIN_ROOM",NEW_MESSAGE:"NEW_MESSAGE"},SERVER:{JOINED_ROOM:"JOINED_ROOM",NEW_MESSAGE:"NEW_MESSAGE"}},v=r(9261),g=r(4931),b=r(3801),j=function(e){var n=e.icon,r=e.children,t=e.onClick;return(0,o.jsxs)("button",{className:"flex items-center justify-between w-56 px-8 py-2 text-indigo-600 transition-colors border border-current rounded-lg hover:bg-indigo-600 group active:bg-indigo-500 focus:outline-none focus:ring",onClick:t,children:[(0,o.jsx)("span",{className:"font-medium capitalize transition-colors group-hover:text-white",children:r}),(0,o.jsx)("span",{className:"flex-shrink-0 p-2 ml-4 bg-white border border-indigo-600 rounded-full group-active:border-indigo-500",children:n})]})};function w(e,n,r,t,s,o,i){try{var a=e[o](i),l=a.value}catch(c){return void r(c)}a.done?n(l):Promise.resolve(l).then(t,s)}function N(e){return function(){var n=this,r=arguments;return new Promise((function(t,s){var o=e.apply(n,r);function i(e){w(o,t,s,i,a,"next",e)}function a(e){w(o,t,s,i,a,"throw",e)}i(void 0)}))}}var y=function(e){var n=(0,i.useState)(""),r=n[0],t=n[1],a=(0,v.s)(),l=a.socket,c=a.setRoomId,u=a.username;function d(){return(d=N(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r&&u){e.next=3;break}return e.abrupt("return");case 3:l.emit(x.CLIENT.JOIN_ROOM,{username:u,connectingRoomId:r}),c(r),g.ZP.success("Joined the room");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,o.jsx)("form",{onSubmit:function(e){return d.apply(this,arguments)},className:"flex flex-wrap justify-between md:flex-row",children:(0,o.jsxs)("div",{className:"relative w-full mx-10 lg:mx-0",children:[(0,o.jsx)("label",{htmlFor:"room",className:"sr-only",children:"RoomID"}),(0,o.jsx)("input",{type:"text",id:"room",name:"room",value:r,onChange:function(e){return t(e.target.value.trim())},placeholder:"Connect with Room ID",className:"block h-12 pl-4 pr-16 text-gray-700 placeholder-gray-400 border-0 w-76 text-md focus:ring-0 rounded-xl "}),(0,o.jsx)("button",{type:"submit",className:"absolute px-4 py-2 text-white transform -translate-y-1/2 bg-pink-500 rounded-lg shadow-md right-4 top-1/2",children:(0,o.jsx)("span",{children:"Join"})})]})})};function E(e,n,r,t,s,o,i){try{var a=e[o](i),l=a.value}catch(c){return void r(c)}a.done?n(l):Promise.resolve(l).then(t,s)}var O=function(){var e=(0,i.useState)(!1),n=(e[0],e[1]),r=(0,v.s)(),t=r.socket,a=r.roomId,l=r.setRoomId,c=r.username,u=function(){var e,n=(e=s().mark((function e(){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("".concat("https://heroic-server.herokuapp.com","/create-room"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:c})});case 4:return n=e.sent,e.next=7,n.text();case 7:r=e.sent,l(r),t.emit(x.CLIENT.JOIN_ROOM,{username:c,roomId:r});case 10:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,s){var o=e.apply(n,r);function i(e){E(o,t,s,i,a,"next",e)}function a(e){E(o,t,s,i,a,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();(0,i.useEffect)((function(){window.addEventListener("scroll",d)}),[]);var d=function(){window.pageYOffset>0?n(!0):n(!1)};return(0,o.jsx)("div",{className:"relative w-full py-4 text-white shadow-md bg-primary print:hidden",children:(0,o.jsx)("div",{className:"px-2 mx-auto max-w-7xl sm:px-6 lg:px-8",children:(0,o.jsxs)("div",{className:"relative flex items-center justify-between h-12",children:[(0,o.jsxs)("div",{className:"flex items-center flex-1 pl-8 sm:p-0 sm:items-stretch sm:justify-start",children:[(0,o.jsx)("div",{className:"flex items-center flex-shrink-0",children:(0,o.jsx)(b.vdY,{className:"w-10 h-10"})}),(0,o.jsx)("div",{className:"hidden sm:block sm:ml-12",children:(0,o.jsx)("div",{className:"flex space-x-12",children:(0,o.jsx)("div",{className:"px-3 py-2 text-2xl font-medium border-b-2 border-transparent cursor-pointer",children:"Heroic Editor"})})})]}),(0,o.jsxs)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 space-x-8 font-medium sm:static sm:inset-auto sm:ml-6 sm:pr-0",children:[a?(0,o.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,o.jsxs)("div",{className:"flex items-center justify-center",children:[(0,o.jsx)("div",{className:"absolute w-4 h-4 bg-green-400 rounded-full animate-ping"}),(0,o.jsx)("div",{className:"absolute w-4 h-4 bg-green-400 rounded-full "})]}),(0,o.jsxs)("div",{className:"pl-4 rounded-lg ",children:["Room ID: ",(0,o.jsx)("span",{className:"text-md",children:a})]})]}):(0,o.jsx)("button",{onClick:u,className:"px-4 py-2 font-semibold text-white transition bg-pink-500 border-2 rounded-full shadow-lg hover:border-primary hover:text-primary hover:shadow-primary/30 border-primary/80 shadow-primary/10",children:"Go Live"}),(0,o.jsx)(y,{})]})]})})})},k=function(e){return(0,o.jsxs)("label",{className:"flex items-center justify-between w-56 px-8 py-2 text-indigo-600 transition-colors border border-current rounded-lg cursor-pointer hover:bg-indigo-600 group active:bg-indigo-500 focus:outline-none focus:ring",children:[(0,o.jsx)("span",{className:"font-medium transition-colors group-hover:text-white",children:"Upload"}),(0,o.jsx)("span",{className:"flex-shrink-0 p-2 ml-4 bg-white border border-indigo-600 rounded-full group-active:border-indigo-500",children:(0,o.jsx)(b.s68,{className:"w-6 h-6"})}),(0,o.jsx)("input",{type:"file",name:"mdFile",onChange:e.onUpload,className:"hidden"})]})},S=r(5131),I=r(6518),_=function(e){var n=(0,i.useState)(""),r=n[0],t=n[1],s=e.isOpen,a=e.setIsOpen,l=(0,v.s)().setUsername;return(0,o.jsx)(S.u,{appear:!0,show:s,as:i.Fragment,children:(0,o.jsx)(I.V,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto transition ease-in-out backdrop-blur-sm",onClose:function(){return a(!1)},children:(0,o.jsxs)("div",{className:"min-h-screen px-4 text-center",children:[(0,o.jsx)(S.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,o.jsx)(I.V.Overlay,{className:"fixed inset-0"})}),(0,o.jsx)("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"\u200b"}),(0,o.jsx)(S.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,o.jsxs)("div",{className:"inline-block w-full max-w-md p-6 my-8 space-y-12 overflow-hidden text-left align-middle transition-all transform shadow-xl bg-primary rounded-2xl",children:[(0,o.jsx)(I.V.Title,{as:"h3",className:"p-2 text-xl font-medium leading-6 text-white ",children:"Your name"}),(0,o.jsx)("form",{onSubmit:function(e){e.preventDefault(),r&&(localStorage.setItem("username",r),l(r),a(!1))},className:"mt-4 mb-6 rounded-lg shadow-md",children:(0,o.jsx)("div",{className:"relative mt-1",children:(0,o.jsx)("input",{type:"text",id:"username",value:r,onChange:function(e){return t(e.target.value)},className:"w-full p-4 pr-12 rounded-lg ",placeholder:"Name"})})}),(0,o.jsx)("button",{type:"submit",className:"block w-full px-5 py-3 text-white bg-pink-500 rounded-lg",children:"Proceed"})]})})]})})})};function R(e,n,r,t,s,o,i){try{var a=e[o](i),l=a.value}catch(c){return void r(c)}a.done?n(l):Promise.resolve(l).then(t,s)}var C=(0,h.default)(Promise.all([r.e(3126),r.e(9084),r.e(8143)]).then(r.bind(r,8143)),{loadableGenerated:{webpack:function(){return[8143]}},ssr:!1}),P=function(){var e=(0,i.useState)(""),n=e[0],r=e[1],t=(0,i.useState)(!1),a=t[0],l=t[1],c=(0,v.s)(),u=c.socket,d=c.roomId,m=c.username,f=c.setUsername,h=function(){var e,n=(e=s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.print();case 1:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,s){var o=e.apply(n,r);function i(e){R(o,t,s,i,a,"next",e)}function a(e){R(o,t,s,i,a,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();(0,i.useEffect)((function(){localStorage.getItem("username")?f(localStorage.getItem("username")):l(!0)}),[]),(0,i.useEffect)((function(){if(u.on("connect",(function(){console.log("SOCKET CONNECTED!",u.id)})),u.on(x.SERVER.JOINED_ROOM,(function(e){var n=e.username;(0,g.ZP)("".concat(n," has joined your session!"),{icon:"\ud83d\udc4b"})})),u.on(x.SERVER.NEW_MESSAGE,(function(e){e.username,e.roomId;var n=e.message;r(n)})),u)return function(){return u.disconnect()}}),[]),(0,i.useEffect)((function(){u&&m&&d&&u.emit(x.CLIENT.JOIN_ROOM,{username:m,roomId:d})}),[u,m,d]);return(0,o.jsxs)("div",{className:"mx-auto",children:[(0,o.jsx)(_,{isOpen:a,setIsOpen:l}),(0,o.jsx)(O,{}),(0,o.jsxs)("div",{className:"grid w-full h-full grid-cols-7 grid-rows-1 gap-2 ",children:[(0,o.jsx)("div",{className:"col-span-3 overflow-x-hidden bg-transparent print:hidden",children:(0,o.jsx)(C,{input:n,setInput:function(e){u.emit(x.CLIENT.NEW_MESSAGE,{roomId:d,username:m,message:e}),r(e)}})}),(0,o.jsxs)("div",{className:"flex flex-col items-center justify-around ",children:[(0,o.jsxs)("h1",{className:"text-4xl text-center font-semibold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-500",children:["Welcome ",(0,o.jsxs)("span",{children:[m,"!"]})]}),(0,o.jsx)("div",{className:"flex flex-col items-center justify-center print:hidden ",children:(0,o.jsxs)("div",{className:"space-y-10 ",children:[(0,o.jsx)(k,{onUpload:function(e){if(e.target.files&&0!==e.target.files.length){var n=new FileReader;n.readAsText(e.target.files[0]),n.onload=function(){var e=n.result;r(e),u.emit(x.CLIENT.NEW_MESSAGE,{username:m,roomId:d,message:e})},n.onerror=function(){console.log(n.error),alert("Unable to read "+e.target.files[0].name)}}}}),(0,o.jsx)(j,{onClick:function(){var e=new Blob([n],{type:"text/plain"}),r=URL.createObjectURL(e),t=document.createElement("a");t.href=r,t.download="markdown.md",t.click(),URL.revokeObjectURL(r)},icon:(0,o.jsx)(b.nMW,{className:"w-6 h-6"}),children:"Download"}),(0,o.jsx)(j,{onClick:h,icon:(0,o.jsx)(b.NJq,{className:"w-6 h-6"}),children:"Print"})]})})]}),(0,o.jsx)("div",{className:"col-span-3 p-8 w-full h-screen overflow-x-hidden overflow-scroll top-0 bottom-0 bg-[#EEEEEE] markdown print:col-span-7 print:border-0 print:overflow-hidden",children:(0,o.jsx)(p,{content:n})})]})]})}}},function(e){e.O(0,[9774,1156,2888,179],(function(){return n=5301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);